{"title":"css实现展开收起","uid":"34a946c8351b06a2ec9f18f8f57d2f30","slug":"css实现展开收起","date":"2023-02-18T04:19:20.000Z","updated":"2023-02-18T04:53:31.369Z","comments":true,"path":"api/articles/css实现展开收起.json","keywords":null,"cover":"https://api.r10086.com/%E5%9B%BE%E5%8C%85/%E7%A5%9E%E5%A5%87%E5%AE%9D%E8%B4%9D%E6%A8%AA%E5%B1%8F%E7%B3%BB%E5%88%971/wallhaven-4oyd2m.jpg","content":"<h1 id=\"css-实现长文本的展开收起\"><a href=\"#css-实现长文本的展开收起\" class=\"headerlink\" title=\"css 实现长文本的展开收起\"></a>css 实现长文本的展开收起</h1><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>效果可见 ➡ <a href=\"https://codesandbox.io/s/xenodochial-haslett-drohnr?file=/src/App.vue\">https://codesandbox.io/s/xenodochial-haslett-drohnr?file=/src/App.vue</a></p></blockquote>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;template&gt;\n  &lt;div\n    class&#x3D;&quot;text-wrapper&quot;\n    :class&#x3D;&quot;foldClassName&quot;\n    :style&#x3D;&quot;collapseTextStyle&quot;\n    @click&#x3D;&quot;handleFoldText&quot;\n  &gt;\n    &lt;template v-if&#x3D;&quot;isLineConform&quot;&gt;\n      &lt;span v-show&#x3D;&quot;isFold&quot; class&#x3D;&quot;text-button&quot;&gt;\n        展开\n        &lt;i class&#x3D;&quot;down-arrow&quot; &#x2F;&gt;\n      &lt;&#x2F;span&gt;\n    &lt;&#x2F;template&gt;\n    &lt;span ref&#x3D;&#39;contentRef&#39;&gt;\n      &lt;div&gt;&#123;&#123; content &#125;&#125;&lt;&#x2F;div&gt;\n    &lt;&#x2F;span&gt;\n    &lt;template v-if&#x3D;&quot;isLineConform&quot;&gt;\n      &lt;span v-show&#x3D;&quot;!isFold&quot; class&#x3D;&quot;text-button&quot;&gt;\n        收起\n        &lt;i class&#x3D;&quot;up-arrow&quot; &#x2F;&gt;\n      &lt;&#x2F;span&gt;\n    &lt;&#x2F;template&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script setup&gt;\nimport &#123; ref, computed, onMounted &#125; from &quot;vue&quot;;\n\nconst content &#x3D; ref(&#39;这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话这是一段很长的话&#39;);\n\nconst width &#x3D; ref(300); &#x2F;&#x2F; 默认宽度\nconst lineHeight &#x3D; ref(20); &#x2F;&#x2F; 默认行高\nconst hiddenLine &#x3D; ref(3); &#x2F;&#x2F; 超出行数隐藏\n\nlet contentRef &#x3D; ref(null);\n\nlet isFold &#x3D; ref(true);\nlet isLineConform &#x3D; ref(false);\n &#x2F;&#x2F; 文本高度，先设置1000，文本传入获取真实高度后替换\nlet textHeight &#x3D; ref(1000);\n\nconst collapseTextStyle &#x3D; computed(()&#x3D;&gt;&#123;\n  const propWidth &#x3D; width.value;\n  let textWidth;\n  if (\n    typeof propWidth &#x3D;&#x3D;&#x3D; &#39;string&#39;\n    &amp;&amp; propWidth.charAt(propWidth.length - 1) &#x3D;&#x3D;&#x3D; &#39;%&#39;\n  ) &#123;\n    textWidth &#x3D; propWidth;\n  &#125; else &#123;\n    textWidth &#x3D; propWidth + &#39;px&#39;;\n  &#125;\n  return &#123;\n    &#x2F;&#x2F; 文本宽度\n    &#39;--text-width&#39;: textWidth,\n    &#x2F;&#x2F; 设置行高\n    &#39;--text-line-height&#39;: lineHeight.value + &#39;px&#39;,\n    &#x2F;&#x2F; 设置第n行开始省略\n    &#39;--text-hidden-line&#39;: hiddenLine.value,\n  &#125;;\n&#125;);\n\nconst foldClassName &#x3D; computed(()&#x3D;&gt; isFold.value ? &#39;text-fold&#39; : &#39;text-unfold&#39;)\n\nonMounted(()&#x3D;&gt;&#123;\ngetTextHeight()\n&#125;)\n\nfunction handleFoldText()&#123;\n  isFold.value &#x3D; !isFold.value\n&#125;\n\n function getTextHeight() &#123;\n  &#x2F;&#x2F; 计算比例\n  const rate &#x3D; window.innerWidth &#x2F; 375;\n  const contentHeight &#x3D; contentRef.value.offsetHeight;\n  isLineConform.value\n    &#x3D; contentHeight &gt; rate * hiddenLine.value * lineHeight.value;\n  textHeight &#x3D; contentHeight;\n&#125;\n&lt;&#x2F;script&gt;\n\n&lt;style scoped&gt;\n.text-wrapper &#123;\n  width: var(--text-width);\n  line-height: var(--text-line-height);\n  overflow: hidden;\n  max-height: calc(var(--text-line-height) * var(--text-hidden-line));\n&#125;\n\n.text-button &#123;\n  margin-left: 5px;\n  margin-right: 10px;\n  height: var(--text-line-height);\n  float: right;\n  clear: both;\n  pointer-events: auto;\n\n  font-family: PingFang SC;\n  font-weight: 500;\n  font-size: 13px;\n  line-height: 18px;\n  text-align: right;\n  color: rgba(22, 24, 35, 0.75);\n  cursor: pointer;\n&#125;\n\n.text-fold &#123;\n  pointer-events: none;\n  text-overflow:ellipsis;\n  overflow:hidden;\n  -webkit-box-orient:vertical;\n  -webkit-line-clamp:var(--text-hidden-line);\n&#125;\n\n.text-fold::before &#123;\n  content: &quot;&quot;;\n  float: right;\n  height: calc((var(--text-hidden-line) - 0.9) * var(--text-line-height));\n  width: 0;\n&#125;\n\n.text-unfold &#123;\n  max-height: calc(var(--text-hidden-line) * var(--text-line-height) * 1px);\n  pointer-events: none;\n&#125;\n\n.down-arrow &#123;\n  margin-left: 5px;\n  margin-top: 6.5px;\n  float: right;\n  width: 0;\n  height: 0;\n  border-width: 5px;\n  border-style: solid;\n  border-color: rgba(22, 24, 35, 0.75) transparent transparent transparent;\n&#125;\n\n.up-arrow &#123;\n  margin-left: 5px;\n  float: right;\n  width: 0;\n  height: 0;\n  border-width: 5px;\n   border-style: solid;\n  border-color: transparent transparent rgba(22, 24, 35, 0.75) transparent;\n&#125;\n&lt;&#x2F;style&gt;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","feature":true,"text":"css 实现长文本的展开收起 效果可见 ➡ https://codesandbox.io/s/xenodochial-haslett-drohnr?file=/src/App.vue &lt;template&gt; &lt;div class&#x3D;&quot;text-w...","link":"","photos":[],"count_time":{"symbolsCount":"4.9k","symbolsTime":"4 mins."},"categories":[{"name":"前端","slug":"前端","count":5,"path":"api/categories/前端.json"}],"tags":[{"name":"css","slug":"css","count":2,"path":"api/tags/css.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#css-%E5%AE%9E%E7%8E%B0%E9%95%BF%E6%96%87%E6%9C%AC%E7%9A%84%E5%B1%95%E5%BC%80%E6%94%B6%E8%B5%B7\"><span class=\"toc-text\">css 实现长文本的展开收起</span></a></li></ol>","author":{"name":"YeZhou","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/65165470?v=4","link":"/","description":"心在路上 路在心里","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/svg/github.svg","link":"https://github.com/yyyz1011"},"douyin":{"icon":"/svg/douyin.svg","link":"https://www.douyin.com/user/MS4wLjABAAAA6ifrwjSFlBcGKpQG3djw2qcrqpJ1eWsosnhMLlsJiJc"},"tuchong":{"icon":"/svg/tuchong.svg","link":"https://tuchong.com/27088635/?utm_source=weixin&utm_medium=android_share"},"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/393187584?spm_id_from=333.1007.0.0"}}}},"mapped":true,"prev_post":{"title":"package.json的一些事","uid":"09b5eb2549c4ed858fbd19cbea029725","slug":"package-json的一些事","date":"2023-02-19T04:55:53.000Z","updated":"2023-02-18T17:07:16.303Z","comments":true,"path":"api/articles/package-json的一些事.json","keywords":null,"cover":"https://api.r10086.com/%E5%9B%BE%E5%8C%85/%E7%A5%9E%E5%A5%87%E5%AE%9D%E8%B4%9D%E6%A8%AA%E5%B1%8F%E7%B3%BB%E5%88%971/wallhaven-1jj5r3.jpg","text":"一、package.json的一些事 参考链接 https://blog.csdn.net/qq_34703156/article/details/121401990 每个仓库都有package.json的文件，而这个文件也记录了包含项目的配置文件、声明的依赖以及运行的指令等等内...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"前端","slug":"前端","count":5,"path":"api/categories/前端.json"}],"tags":[{"name":"配置","slug":"配置","count":1,"path":"api/tags/配置.json"}],"author":{"name":"YeZhou","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/65165470?v=4","link":"/","description":"心在路上 路在心里","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/svg/github.svg","link":"https://github.com/yyyz1011"},"douyin":{"icon":"/svg/douyin.svg","link":"https://www.douyin.com/user/MS4wLjABAAAA6ifrwjSFlBcGKpQG3djw2qcrqpJ1eWsosnhMLlsJiJc"},"tuchong":{"icon":"/svg/tuchong.svg","link":"https://tuchong.com/27088635/?utm_source=weixin&utm_medium=android_share"},"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/393187584?spm_id_from=333.1007.0.0"}}}},"feature":true},"next_post":{"title":"算法-回文数","uid":"2951c741688259208b1fb3af7c687644","slug":"算法-回文数","date":"2023-02-09T14:55:14.000Z","updated":"2023-02-09T15:05:45.599Z","comments":true,"path":"api/articles/算法-回文数.json","keywords":null,"cover":"https://api.r10086.com/%E5%9B%BE%E5%8C%85/%E7%A5%9E%E5%A5%87%E5%AE%9D%E8%B4%9D%E6%A8%AA%E5%B1%8F%E7%B3%BB%E5%88%971/wallhaven-4x379l.jpg","text":"回文数 给你一个整数 x ，如果 x 是一个回文整数，返回 true ；否则，返回 false 。 回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。 例如，121 是回文，而 123 不是。 来源：力扣（LeetCode） 链接：https://leetcode.c...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"算法","slug":"算法","count":1,"path":"api/categories/算法.json"}],"tags":[{"name":"算法","slug":"算法","count":1,"path":"api/tags/算法.json"}],"author":{"name":"YeZhou","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/65165470?v=4","link":"/","description":"心在路上 路在心里","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":{"icon":"/svg/github.svg","link":"https://github.com/yyyz1011"},"douyin":{"icon":"/svg/douyin.svg","link":"https://www.douyin.com/user/MS4wLjABAAAA6ifrwjSFlBcGKpQG3djw2qcrqpJ1eWsosnhMLlsJiJc"},"tuchong":{"icon":"/svg/tuchong.svg","link":"https://tuchong.com/27088635/?utm_source=weixin&utm_medium=android_share"},"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/393187584?spm_id_from=333.1007.0.0"}}}},"feature":true}}